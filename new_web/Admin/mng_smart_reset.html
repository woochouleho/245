<html>
<head>
<title></title>
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width, user-scalable=0, initial-scale=1, minimum-scale=1, maximum-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="description" content=""/>
	<meta name="keywords" content=""/>
	<link rel="stylesheet" href="css/common.css"/>
	<script type="text/javascript" src="js/jquery-1.11.2.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/modernizr.custom.39786.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/response.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/icheck.js" charset="utf-8"></script>
	<script type="text/javascript" src="js/sb_common.js" charset="utf-8"></script>
	<script language="javascript" src="js/util.js"></script>
	<script language="javascript" src="js/prv_util.js"></script>
	<script language="javascript" src="js/portName.js"></script>

<script language="javascript">
var week_list = ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"];

function frmLoaduser(enable_user) {
	with ( document.forms[0] ) {
		if(enable_user == 0){
			$('#auto_reset_idle_enable').attr('disabled' , true);
			auto_uptime.disabled = true;

			s_hour.disabled = true;
			s_min.disabled  = true;
			e_hour.disabled = true;
			e_min.disabled  = true;

			week_day_0.disabled =true;
			week_day_1.disabled =true;
			week_day_2.disabled =true;
			week_day_3.disabled =true;
			week_day_4.disabled =true;
			week_day_5.disabled =true;
			week_day_6.disabled =true;

			data_limit.disabled =true;
			data_limit_unit.disabled =true;
			wan_crc.disabled =true;
		}
		else{
			$('#auto_reset_idle_enable').attr('disabled' , false);
			auto_uptime.disabled = false;

			s_hour.disabled = false;
			s_min.disabled  = false;
			e_hour.disabled = false;
			e_min.disabled  = false;

			week_day_0.disabled =false;
			week_day_1.disabled =false;
			week_day_2.disabled =false;
			week_day_3.disabled =false;
			week_day_4.disabled =false;
			week_day_5.disabled =false;
			week_day_6.disabled =false;

			data_limit.disabled =false;
			data_limit_unit.disabled =false;
			wan_crc.disabled =false;
		}
	}
}

function loadvalues()
{
	var dataLimit="1024";
	var dataLimitUnit="1";
	var rebootOnIdle="1";
	var wanCrcLimit="20";
	var weekRange="0|0|0|0|0|1|0";
	var hourRange="03:10-05:00";
	var checkUptime="7d";
	var i = 0;

	with ( document.forms[0] ) {
		if(rebootOnIdle== '1'){
			$('#auto_reset_idle_enable').val('1');
		}else{
			$('#auto_reset_idle_enable').val('0');
		}

		/* insert time range */
		var auto_time = hourRange.split('-');
		var start_time = auto_time[0].split(':');
		var end_time = auto_time[1].split(':');

		s_hour.value= start_time[0];
		s_min.value = start_time[1];
		e_hour.value= end_time[0];
		e_min.value = end_time[1];

		/* insert week range*/
		var w_string = weekRange.split('|');
		for ( i = 0 ; i < w_string.length ; i ++ )
		{
			if (parseInt(w_string[i]) == 1)
				document.getElementById("week_day_"+i).checked = true;
			else
				document.getElementById("week_day_"+i).checked = false;
		}

		/* insert uptime*/
		auto_uptime.value=checkUptime;

		data_limit.value=dataLimit;
		data_limit_unit.value=dataLimitUnit;
		wan_crc.value=wanCrcLimit;
	}
}

function frmLoadSR() {
	with ( document.forms[1] ) {
		var wsr_enable = "1";
		var wsr_checkdate= "8";
		var wsr_hourstart = "3";
		var wsr_hourend = "5";
		var wsr_minstart = "10";
		var wsr_minend = "0";
		var wsr_checkinterval = "5";
		var wsr_trafficlimit = "500";
		var wsr_trafficunit = "1";

		if(wsr_enable == 0){
			// disable
			$('#wsr_enable_set').val('0');
		}
		else{
			//enable
			$('#wsr_enable_set').val('1');
		}
		wireless_smart_reset_uptime.value = wsr_checkdate;
		wireless_smart_reset_time_1.value = wsr_hourstart;
		wireless_smart_reset_time_2.value = wsr_hourend;
		wireless_smart_reset_min_1.value = wsr_minstart;
		wireless_smart_reset_min_2.value = wsr_minend;
		wireless_smart_reset_limit.value = wsr_trafficlimit;
		wireless_smart_reset_unit.value = wsr_trafficunit;
		wireless_smart_reset_interval.value = wsr_checkinterval;
	}
}

function frmLoad() {
	with ( document.forms[0] ) {
		var vauto_reset_enable = 1;
		var vauto_enable_user = 1;
		if(vauto_reset_enable == 1 && vauto_enable_user ==0 ){
			$('#auto_reset_enable').val('0');
			auto_reset_m_enable.checked = false;

			auto_reset_m_enable.disabled = false;
			frmLoaduser(0);
		}else if(vauto_reset_enable == 1 && vauto_enable_user ==1){
			$('#auto_reset_enable').val('1');
			auto_reset_m_enable.checked = true;

			auto_reset_m_enable.disabled = false;
			frmLoaduser(1);
		}else if (vauto_reset_enable == 0 && vauto_enable_user ==0){
			$('#auto_reset_enable').val('0');
			auto_reset_m_enable.checked = false;

			auto_reset_m_enable.disabled = true;
			frmLoaduser(0);
		}

		loadvalues();
	}

	frmLoadSR();
	//frmLoadAR();
}

function btnPushuser() {
	with ( document.forms[0] ) {
		if( auto_reset_m_enable.checked == true)
			frmLoaduser(1);
		else
			frmLoaduser(0);
	}
}

function btnPushEnable(){
	with ( document.forms[0] ) {
		if( $('#auto_reset_enable').val() == '1'){
			auto_reset_m_enable.disabled = false;
			frmLoaduser(1);
		}else{
			auto_reset_m_enable.disabled = true;
			frmLoaduser(0);
		}
	}
}

function wsr_enable_change()
{
	switch( $('#wsr_enable_set').val() )
	{
		case '0' :
			$('.cls_wsr').attr('disabled', true);
			break;			
		case '1':
		case '2':
			$('.cls_wsr').attr('disabled', false);
			break;		
	}
}

function btnApplySave(action)  {
	if(action == 1 ) {
	} else {
		if (check_date() == false) {
			return false;
		}
	}
}

function check_date()
{
	var s_hour = Number(document.getElementById("wireless_smart_reset_time_1").value)
	var s_min = Number(document.getElementById("wireless_smart_reset_min_1").value)
	var e_hour = Number(document.getElementById("wireless_smart_reset_time_2").value)
	var e_min = Number(document.getElementById("wireless_smart_reset_min_2").value)
	var total = (((e_hour * 60) + e_min) - ((s_hour * 60) + s_min));
	var limit_time = Number(30);

	if( document.getElementById("wireless_smart_reset_uptime").value <= 0 ) {
		webAlert("Uptime을 1[days] 이상으로 입력해 주세요");
		return false;
	}

	if ( s_hour > e_hour ) {
		webAlert("종료시간이 시작시간보다 작습니다.");
		return false ;
	}
	else if ( s_hour == e_hour ) {
		if (e_min <= s_min ) {
			webAlert("종료시간이 시작시간보다 작습니다.");
			return false ;
		} 
	} 

	if ( total < limit_time ) {
		webAlert("리셋 수행시간은 30분 이상이여야 합니다.");
		return false ;
	}

	return true;
}
</script>
</head>
<body onload="frmLoad()">

<script language="javascript">
showmenubar();
</script>

<div class="container">
<form>
	<div class="navi clfx">
		<ul class="clfx">
			<li><img src="img/navi_home.png" alt="home" /><span>Home </span></li>
			<li>관리</li>
			<li>스마트 리셋</li>
		</ul>
	</div>
	<h1 class="title_style_1">스마트 리셋</h1>
	<p>특정 시간 단말 자동 부팅 기능과 무선 리셋 기능 관련 정보들을 설정합니다.</p>
	<hr>
	<h2 class="title_style_2">자동 부팅 설정</h2>
	<div class="tb_style_5">
		<table>
			<tbody>

				<tr>
					<th scope="row">자동 재부팅 사용</th>
					<td>
						<select  id="auto_reset_enable" name="auto_reset_enable"  onchange="btnPushEnable();">
							<option value='0'>비활성화</option>
							<option value='1'>활성화</option>
						</select>
					</td> 
				</tr>			
				<tr style='display:none;'>
					<th scope="row">수동설정 사용</th>
					<td><input id="auto_reset_m_enable" name="auto_reset_m_enable" type="checkbox" onclick="btnPushuser();"></td>
				</tr>
				<tr style='display:none'>
					<th scope="row">Auto Reboot on idle</th>
					<td>
						<select  id="auto_reset_idle_enable" name="auto_reset_idle_enable">
							<option value='0'>비활성화</option>
							<option value='1'>활성화</option>
						</select>
					</td>
				</tr>
				<tr style='display:none'>
					<th scope="row">Auto Uptime </th>
					<td>
						<input type="text" name="auto_uptime" size="3" maxlength="3">
						(예시 : 15d/h/m)
					</td>
				</tr>
				<tr style='display:none'>
					<th scope="row">Auto 시간(00 ~ 23)</th>
					<td>
						<input type="text" id="s_hour" name="s_hour" size="3" maxlength="2", style="width:15%"> 시 
						<input type="text" id="s_min" name="s_min" size="1" maxlength="2", style="width:15%"> 분 
						~ 
						<input type="text" id="e_hour" name="e_hour" size="1" maxlength="2", style="width:15%"> 시 
						<input type="text" id="e_min" name="e_min" size="1" maxlength="2", style="width:15%"> 분 
					</td>
				</tr>
				<tr style='display:none'>
					<th scope="row">Auto 요일</th>
					<td>
						<script language="javascript">
							var i = 0;
							for ( i = 0; i < week_list.length; i ++ ) {
								document.writeln("<input type='checkbox' id='week_day_" + i + "' name='week_day_" + i + "'>"+ week_list[i]);
							}
						</script>
					</td>
				</tr>
				<tr style='display:none'>
					<th scope="row">Auto 평균 데이타량(1분)</th>
					<td>
						<input type="text" id="data_limit" name="data_limit" size="7" maxlength="7">
						<select id="data_limit_unit" name="data_limit_unit">
							<option value="0" >bps</option>
							<option value="1" selected="selected">Kbps</option>
							<option value="2" >Mbps</option>
						</select>
					</td>
				</tr>
				<tr style='display:none'>
					<th scope="row">WAN Port CRC 개수</th>
					<td>
						<input type="text" id="wan_crc" name="wan_crc" size="7" maxlength="7">
						개 이상(기본값 : 20)
					</td>
				</tr>				 
			</tbody>
		</table>	
		<br>
		<br>
		<div class="txt_c">
			<input type="button"  onclick="btnApplySave(1)" value="저장" class="basic-btn01 btn-blue-bg" >
		</div>
	</div>
</form>
<form name="formWsrSet" action="">
	<h2 class="title_style_2">무선 스마트 리셋 설정</h2>
	<div class="tb_style_2">
		<table>
			<tbody>
				<tr>
					<th scope="row">동작</th>
					<td>
						<select id="wsr_enable_set" onchange='wsr_enable_change();'>
							<option value='0'>비활성화</option>
							<option value='1'>활성화</option>
							<option value='2'>즉시 리셋</option>
						</select>
					</td>
				</tr>				
				<tr style='display:none'>
					<th scope="row">Uptime</th>
					<td><input type="number" size="1" id="wireless_smart_reset_uptime" name="wireless_smart_reset_uptime" value="7" style="width:30%"> [days] </td>
				</tr>
				<tr style='display:none'>
					<th scope="row">리셋 수행 시간</th>
					<td>
						<input type="text" id="wireless_smart_reset_time_1" name="wireless_smart_reset_time_1" style="width:10%;" maxlength="2" value="03">
						시
						<input type="text" id="wireless_smart_reset_min_1" name="wireless_smart_reset_min_1" value="00" style="width:10%;" maxlength="2" >
						분
						~
						<input type="text" id="wireless_smart_reset_time_2" name="wireless_smart_reset_time_2"  style="width:10%;" maxlength="2" value="05">
						시
						<input type="text" id="wireless_smart_reset_min_2" name="wireless_smart_reset_min_2" value="00" style="width:10%;" maxlength="2" >
						분
					</td>
				</tr>
					<tr style='display:none'>
					<th scope="row">WLAN 트래픽 임계값</th>
					<td>
						<input type="text" id="wireless_smart_reset_limit" name="wireless_smart_reset_limit" size="1" maxlength="10" value="300" style="width:30%">
						<select id="wireless_smart_reset_unit" name="wireless_smart_reset_unit">
							<option value="0" >bps</option>
							<option value="1" selected="selected">Kbps</option>
							<option value="2" >Mbps</option>
						</select>
					</td>
				</tr>
				<tr style='display:none'>
					<th scope="row">검사 주기</th>
					<td><input type="text" id="wireless_smart_reset_interval" name="wireless_smart_reset_interval" size="1" maxlength="2" value="30" style="width:30%"> [min] </td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="txt_c">
		<input type="button"  value="적용" onclick="btnApplySave(2)" class="basic-btn01 btn-blue-bg" min="0" >
	</div>
	<div>
		<input type="hidden" value="wsr_reset" name="cmd" id="cmd">
	</div>
</form>
</div>
</body>
</html>
